name: Test OpenWrt Version Extraction

on:
  workflow_dispatch:

jobs:
  test-version:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Extract OpenWrt version
        run: |
          cd openwrt
          VERSION=$(grep '^VERSION:=' include/version.mk | cut -d '=' -f2 | tr -d ' ')
          PATCHLEVEL=$(grep '^PATCHVER:=' include/version.mk | cut -d '=' -f2 | tr -d ' ')
          FULLVERSION="${VERSION}.${PATCHLEVEL}"
          echo "Detected version: $FULLVERSION"
